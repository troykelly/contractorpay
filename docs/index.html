<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contractor Pay Estimator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">Contractor Tools</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link active" aria-current="page" href="index.html">Pay Estimator</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>
    <div class="container tool-container mt-4">
        <div class="row">
            <div class="col-md-6 form-section">
            <h1>Contractor Pay Estimator</h1>
            <p class="disclaimer">This tool provides an approximate estimation only and is not financial advice. Consult a professional for advice specific to your situation.</p>

        <div class="mb-3">
            <label for="rate" class="form-label">Rate (ex GST)</label>
            <input type="number" id="rate" class="form-control" value="800">
        </div>
        <div class="mb-3">
            <label for="rateType" class="form-label">Rate Type</label>
            <select id="rateType" class="form-select">
                <option value="hourly">Hourly</option>
                <option value="daily" selected>Daily</option>
                <option value="weekly">Weekly</option>
            </select>
        </div>

        <div class="mb-3">
            <label for="startDate" class="form-label">Start Date</label>
            <input type="date" id="startDate" class="form-control">
        </div>
        <div class="mb-3">
            <label for="endDate" class="form-label">End Date</label>
            <input type="date" id="endDate" class="form-control">
        </div>
        <div class="mb-3">
            <label for="state" class="form-label">State/Territory</label>
            <select id="state" class="form-select">
                <option value="ACT">ACT</option>
                <option value="NSW">NSW</option>
                <option value="NT">NT</option>
                <option value="QLD">QLD</option>
                <option value="SA">SA</option>
                <option value="TAS">TAS</option>
                <option value="VIC">VIC</option>
                <option value="WA">WA</option>
            </select>
        </div>
        <div class="mb-3">
            <label for="workingDays" class="form-label">Working Days in Period</label>
            <input type="number" id="workingDays" class="form-control" value="0" readonly>
        </div>
        <div class="mb-3">
            <label for="holidayDays" class="form-label">Holiday Days Taken</label>
            <input type="number" id="holidayDays" class="form-control" value="0">
        </div>
        <div class="mb-3" id="furloughContainer">
            <label class="form-label">Furlough Periods</label>
            <div class="furlough-period">
                <input type="date" class="furlough-start">
                <input type="date" class="furlough-end">
            <button type="button" class="btn btn-danger btn-sm remove-furlough">Remove</button>
            </div>
            <button type="button" id="addFurlough" class="btn btn-secondary btn-sm mt-2">Add Furlough Period</button>
        </div>

        <div class="form-check mb-3">
            <input type="checkbox" id="collectGst" class="form-check-input" checked>
            <label class="form-check-label" for="collectGst">Collect GST</label>
        </div>

        <div class="mb-3">
            <label for="taxRate" class="form-label">Contractor Tax Rate (%)</label>
            <input type="number" id="taxRate" class="form-control" value="30">
            <small class="note">Approximate rate to set aside for tax.</small>
        </div>
        <div class="mb-3">
            <label for="superRate" class="form-label">Super Rate (%)</label>
            <input type="number" id="superRate" class="form-control" value="11">
        </div>
        <div class="mb-3">
            <label for="hecsRate" class="form-label">HECS Rate (%)</label>
            <input type="number" id="hecsRate" class="form-control" value="0">
        </div>

        <div class="mb-3">
            <label for="hoursPerDay" class="form-label">Working Hours Per Day</label>
            <input type="number" id="hoursPerDay" class="form-control" value="7.2">
        </div>

        <div class="mb-3">
            <label for="invoiceFreq" class="form-label">Invoice Frequency</label>
            <select id="invoiceFreq" class="form-select">
                <option value="weekly">Weekly</option>
                <option value="fortnightly">Fortnightly</option>
                <option value="monthly">Monthly</option>
                <option value="quarterly">Quarterly</option>
            </select>
        </div>
        <div class="mb-3" id="invoiceDayGroup" style="display:none;">
            <label for="invoiceDay" class="form-label">Day of Month</label>
            <input type="number" id="invoiceDay" class="form-control" min="1" max="31" value="1">
        </div>

        <div class="actions d-grid gap-2 d-md-flex">
            <button id="calculate" class="btn btn-primary">Calculate</button>
            <button id="copyLink" class="btn btn-secondary">Copy Share Link</button>
            <button id="createLedger" class="btn btn-outline-primary">Create Ledger</button>
        </div>
        <div id="error" class="error" hidden></div>
        </div>

        <div class="col-md-6 results-section">
            <div class="results" id="results" hidden>
                <h2>Results</h2>
                <table class="results-table table table-striped">
                    <tbody>
                        <tr><th id="incomeLabel">Total income (ex GST)</th><td id="incomeTotal"></td></tr>
                        <tr><th>GST to set aside</th><td id="gstAmount"></td></tr>
                        <tr><th>Estimated tax to set aside</th><td id="taxAmount"></td></tr>
                        <tr><th>Super to set aside</th><td id="superAmount"></td></tr>
                        <tr><th>HECS to set aside</th><td id="hecsAmount"></td></tr>
                        <tr><th>Total furlough days</th><td id="totalFurloughDays"></td></tr>
                        <tr><th>Total hours worked</th><td id="totalHours"></td></tr>
                    </tbody>
                    <tfoot>
                        <tr class="total-row"><th>Approximate take-home pay</th><td id="netAmount"></td></tr>
                    </tfoot>
                </table>
                <details id="rateChange" class="rate-change">
                    <summary>Rate Change Calculator</summary>
                    <div class="rate-change-controls">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="-10">-10</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="-5">-5</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="-1">-1</button>
                        <span id="currentRate" class="mx-2"></span>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="1">+1</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="5">+5</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-inc="10">+10</button>
                    </div>
                    <div class="rate-change-controls">
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="-1">-1%</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="-0.5">-0.5%</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="-0.25">-0.25%</button>
                        <span class="pct-label">% Change</span>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="0.25">+0.25%</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="0.5">+0.5%</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="1">+1%</button>
                        <button type="button" class="btn btn-outline-secondary btn-sm" data-pct="2.5">CPI</button>
                    </div>
                    <p>New net amount: $<span id="changedNet"></span></p>
                    <p>Change: <span id="rateChangePercent"></span>%</p>
                </details>
                <div id="resultExplanation" class="result-explanation"></div>
            </div>
        </div>
    </div>
    </div>

    <div id="ledgerModal" class="tool-modal" hidden>
        <div class="tool-modal-content">
            <button type="button" class="btn-close float-end" id="closeLedger" aria-label="Close"></button>
            <h2>General Ledger</h2>
            <div id="ledgerAccounts"></div>
            <div class="modal-actions d-flex gap-2 mt-3">
                <button type="button" id="copyLedger" class="btn btn-secondary">Copy Ledger</button>
                <button type="button" id="closeLedgerFooter" class="btn btn-primary">Close</button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
